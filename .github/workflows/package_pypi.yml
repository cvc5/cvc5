on: [push, pull_request]
name: PyPi packaging

jobs:
  build:
    runs-on: ubuntu-latest

    steps:

    - uses: actions/checkout@v2

    - name: Install dependencies
      uses: ./.github/actions/install-dependencies
      with:
        with-documentation: false
        with-python-bindings: false
        with-python-packaging: true

    - name: Setup caches
      uses: ./.github/actions/setup-cache
      with:
        cache-key: cvc5-pypi

    - name: Package PyPi wheel packages
      uses: ./.github/actions/package-python-wheel
      with:
        twine-token: ${{ secrets.PYPI_TOKEN }}
