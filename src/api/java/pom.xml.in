<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>io.github.cvc5</groupId>
    <artifactId>cvc5</artifactId>
    <version>@CVC5_MAVEN_VERSION@</version>
    <packaging>pom</packaging>

    <name>cvc5 Java Bindings</name>
    <description>Java bindings for cvc5, an open-source automatic theorem prover for SMT problems</description>
    <url>https://cvc5.github.io/</url>

    <licenses>
        <license>
            <name>BSD 3-Clause License</name>
            <url>https://github.com/cvc5/cvc5/blob/main/COPYING</url>
            <distribution>repo</distribution>
        </license>
    </licenses>

    <developers>
        <!-- Listed below are the project leaders and senior technical leads.
             For a complete list of developers and authors, see:
             https://github.com/cvc5/cvc5/blob/main/AUTHORS -->
        <developer>
            <id>HanielB</id>
            <name>Haniel Barbosa</name>
            <email>hbarbosa@dcc.ufmg.br</email>
            <organization>Universidade Federal de Minas Gerais</organization>
        </developer>
        <developer>
            <id>barrettcw</id>
            <name>Clark Barrett</name>
            <email>barrett@cs.stanford.edu</email>
            <organization>Stanford University</organization>
        </developer>
        <developer>
            <id>aniemetz</id>
            <name>Aina Niemetz</name>
            <email>niemetz@cs.stanford.edu</email>
            <organization>Stanford University</organization>
        </developer>
        <developer>
            <id>mpreiner</id>
            <name>Mathias Preiner</name>
            <email>preiner@cs.stanford.edu</email>
            <organization>Stanford University</organization>
        </developer>
        <developer>
            <id>ajreynol</id>
            <name>Andrew Reynolds</name>
            <email>andrew-reynolds@uiowa.edu</email>
            <organization>The University of Iowa</organization>
        </developer>
        <developer>
            <id>tinelli</id>
            <name>Cesare Tinelli</name>
            <email>cesare-tinelli@uiowa.edu</email>
            <organization>The University of Iowa</organization>
        </developer>
    </developers>

    <scm>
        <connection>scm:git:git://github.com/cvc5/cvc5.git</connection>
        <developerConnection>scm:git:ssh://github.com:cvc5/cvc5.git</developerConnection>
        <url>https://github.com/cvc5/cvc5</url>
    </scm>

    <issueManagement>
        <system>GitHub</system>
        <url>https://github.com/cvc5/cvc5/issues/</url>
    </issueManagement>

    <properties>
      <artifacts.dir>./src/api/java</artifacts.dir>
      <javadoc.dir>./docs/api/java</javadoc.dir>
    </properties>

    <!--
    All JAR files are generated by the build scripts produced by CMake and
    are attached here for publication on Maven Central. Only the main artifact,
    cvc5.jar, which includes the Java API for cvc5, is always attached.
    The other JARs are attached only if they are present on disk.
    This is achieved by defining a separate profile for each JAR,
    which is activated only if the corresponding file exists. Additionally,
    there is a profile called "release", which, when activated during deployment,
    signs all artifacts with a GPG key and publishes all available artifacts to
    Maven Central.
    -->

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>3.6.1</version>
                <executions>
                    <execution>
                        <id>attach-main-artifact</id>
                        <phase>package</phase>
                        <goals>
                            <goal>attach-artifact</goal>
                        </goals>
                        <configuration>
                            <artifacts>
                                <artifact>
                                    <file>${artifacts.dir}/cvc5.jar</file>
                                    <type>jar</type>
                                </artifact>
                            </artifacts>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>sources</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-sources.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-sources</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-sources.jar</file>
                                            <type>jar</type>
                                            <classifier>sources</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>javadoc</id>
            <activation>
                <file>
                    <exists>${javadoc.dir}/cvc5-javadoc.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-javadoc</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${javadoc.dir}/cvc5-javadoc.jar</file>
                                            <type>jar</type>
                                            <classifier>javadoc</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>linux-x86_64</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-linux-x86_64.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-linux-x86_64</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-linux-x86_64.jar</file>
                                            <type>jar</type>
                                            <classifier>linux-x86_64</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>linux-aarch_64</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-linux-aarch_64.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-linux-aarch_64</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-linux-aarch_64.jar</file>
                                            <type>jar</type>
                                            <classifier>linux-aarch_64</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>osx-x86_64</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-osx-x86_64.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-osx-x86_64</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-osx-x86_64.jar</file>
                                            <type>jar</type>
                                            <classifier>osx-x86_64</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>osx-aarch_64</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-osx-aarch_64.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-osx-aarch_64</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-osx-aarch_64.jar</file>
                                            <type>jar</type>
                                            <classifier>osx-aarch_64</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>windows-x86_64</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-windows-x86_64.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-windows-x86_64</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-windows-x86_64.jar</file>
                                            <type>jar</type>
                                            <classifier>windows-x86_64</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>windows-aarch_64</id>
            <activation>
                <file>
                    <exists>${artifacts.dir}/cvc5-windows-aarch_64.jar</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-windows-aarch_64</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                                <configuration>
                                    <artifacts>
                                        <artifact>
                                            <file>${artifacts.dir}/cvc5-windows-aarch_64.jar</file>
                                            <type>jar</type>
                                            <classifier>windows-aarch_64</classifier>
                                        </artifact>
                                    </artifacts>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>release</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <version>3.6.2</version>
                        <executions>
                            <execution>
                                <id>enforce-all-artifacts-are-attached</id>
                                <goals>
                                    <goal>enforce</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <requireActiveProfile>
                                            <profiles>sources,javadoc</profiles>
                                        </requireActiveProfile>
                                         <requireActiveProfile>
                                            <profiles>linux-x86_64,linux-aarch_64</profiles>
                                        </requireActiveProfile>
                                         <requireActiveProfile>
                                            <profiles>osx-x86_64,osx-aarch_64</profiles>
                                        </requireActiveProfile>
                                         <requireActiveProfile>
                                            <profiles>windows-x86_64,windows-aarch_64</profiles>
                                        </requireActiveProfile>
                                    </rules>
                                    <fail>true</fail>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-gpg-plugin</artifactId>
                        <version>3.2.8</version>
                        <executions>
                            <execution>
                                <id>sign-artifacts</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                                <configuration>
                                    <gpgArguments>
                                        <arg>--pinentry-mode</arg>
                                        <arg>loopback</arg>
                                    </gpgArguments>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <plugin>
                        <groupId>org.sonatype.central</groupId>
                        <artifactId>central-publishing-maven-plugin</artifactId>
                        <version>0.9.0</version>
                        <extensions>true</extensions>
                        <configuration>
                            <publishingServerId>central</publishingServerId>
                            <autoPublish>true</autoPublish>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project>
